language: cpp

os:
  - linux

compiler:
  - gcc

env:
  global:
    - MATRIX_EVAL="CC=gcc-4.9 && CXX=g++-4.9"
  matrix:
    - BUILD_TYPE=Debug
    - BUILD_TYPE=Release

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-4.9
      - libboost-all-dev
      - libcurl3
      - libgflags-dev
      - libicu-dev
      - openssl
      - libprotobuf-dev
      - zlib1g-dev
      - protobuf-compiler
      - thrift-compiler

before_install:
  - eval "${MATRIX_EVAL}"

script:
  - cd examples && sh gen.sh && cd ..
  - mkdir build && cd build && cmake -DCMAKE_BUILD_TYPE=$BUILD_TYPE .. && make -j4

